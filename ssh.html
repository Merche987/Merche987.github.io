<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 6.0.7.3 (Linux)"/>
	<meta name="created" content="2019-10-31T13:15:44.630203959"/>
	<meta name="changed" content="2019-11-08T13:42:04.616213780"/>
	<style type="text/css">
		h2.cjk { font-family: "Noto Sans CJK SC Regular" }
		h2.ctl { font-family: "Lohit Devanagari" }
	</style>
</head>
<body lang="es-ES" dir="ltr">
<h1 align="center" style="font-style: normal"><font face="DejaVu Serif, serif"><font size="7" style="font-size: 36pt">SSH</font></font></h1>
<h2 class="western">Ejercicio 2</h2>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">1-
Instala un servidor SSH en tu sistema GNU/Linux y comprueba que el
puerto 22 esta en escucha.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_50ece8405b6e1ad2.png" name="Imagen1" align="left" width="550" height="363">
  <br clear="left"/>
</img>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm; font-variant: normal; font-style: normal">
Para comprobar el puerto 22 realizaremos el comando “sudo nano
etc/ssh/sshd_config”.</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_ffba5c38b4ef2283.png" name="Imagen2" align="left" width="474" height="317">
  <br clear="left"/>
</img>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">2-
Crea dos usuarios denominados usuario1 y usuario2, que vas a usarlos
en el ejercicio.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm">Para crear el usuario utilizaremos el
comando “sudo adduser usuario 2” en nuestro caso será el 2 ya
que mi compañera creará el 1.</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_73f5bc9e62755956.png" name="Imagen3" align="left" width="526" height="299">
  <br clear="left"/>
</img>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><font color="#3465a4">Con
el comando ls /home podremos ver los usuarios que tenemos creados.</font>
</font></font>
</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_bd0823695620e275.png" name="Imagen4" align="left" width="473" height="316">
  <br clear="left"/>
</img>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">3-
Comprueba que puedes acceder mediante ssh a esos usuarios.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_8c0caaadab853642.png" name="Imagen5" align="left" width="470" height="319">
  <br clear="left"/>
</img>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">4-
Cambia el puerto del servidor e intenta a acceder de nuevo.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_216f78a14576df9b.png" name="Imagen7" align="left" width="392" height="259" border="0"/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_cf58c67b8761b523.png" name="Imagen6" align="left" width="471" height="33" border="0"/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">5-
Cambia la configuración del servidor para que puedas acceder al
sistema con usuario1 y NO con usuario2.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#3465a4"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Utilizamos
el comando “sudo nano /etc/ssh/sshd_config”. </font></font></font>
</p>
<p style="margin-bottom: 0cm"><font color="#3465a4"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Añadimos
al final de la página “AllowUsers pi usuario1” para que nos deje
entrar con el usuario 1 y no con el 2. </font></font></font>
</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_495a9d8d106bc255.png" name="Imagen8" align="left" width="596" height="285" border="0"/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">6-
Cambia la configuración del servidor para que solo pueda acceder
desde una IP determinada.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#3465a4"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Utilizamos
el comando “sudo nano /etc/ssh/sshd_config”. </font></font></font>
</p>
<p style="margin-bottom: 0cm"><font color="#3465a4"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Añadimos
al final de la página “AllowUsers pi 192.168.18.74” para que
solo nos permita entrar desde nuestro equipo. </font></font></font>
</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_858052fa3589795c.png" name="Imagen9" align="left" width="528" height="350" border="0"/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_ce9f71f2df63d61d.png" name="Imagen10" align="left" width="551" height="368" border="0"/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">7-
Captura con wireshark una conexión ssh, comprueba que login y
contraseña van encriptada. Analiza cada una de las capas TCP/IP
implicadas indicando los datos mas relevantes, además del tamaño de
cada capa, separando datos y cabecera.</font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#3465a4"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Abrimos
el Wireshark, nos vamos a la terminal y lanzamos el comando “ssh
pi@192.168.18.202 -p 2222” para acceder a la raspberrypi.</font></font></font></p>
<p style="margin-bottom: 0cm"><font color="#3465a4"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Una
vez ya dentro volvemos al wireshark y buscamos “SSH”, nos
aparecerá muchos trafico, escogemos una y comprobamos que está
encriptada. </font></font></font>
</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_ff86c227a9f3ef79.png" name="Imagen11" align="left" width="614" height="416" border="0"/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><img src="ssh_html_ebb4c1bfb4265c65.png" name="Imagen12" align="left" width="680" height="544" border="0"/>
<br/>

</p>
</body>
</html>